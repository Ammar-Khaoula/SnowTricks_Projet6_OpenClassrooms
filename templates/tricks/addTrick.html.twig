{% extends 'base.html.twig' %}

{% block title %}Figures{% endblock %}

{% block body %}
<div class="container my-3">
    <h1>Ajouter un trick</h1>
        {{form_start(trickform)}}
            <div class="col-10 m-2">
                <div class="d-flex p-2">
                    <div class="col-5">{{form_row(trickform.name)}}</div>
                    <div class="col-3">{{form_row(trickform.categories)}}</div>
                </div>
                <div>
                    {{form_row(trickform.image)}}
                </div>
                <div>
                    {{form_row(trickform.discription)}}
                </div>
                <div>
                    {{form_row(trickform.imageUrls)}}
                </div>
                <div class="col-6 videos-container">
                        <div id="videos" class="videos" data-prototype="{{ form_row(trickform.videoUrls.vars.prototype)|e('html_attr') }}">
                            {{ form_row(trickform.videoUrls) }}
                        </div>
                    <input id="video-counter" type="text" value="0">
                    <button id="add-video" type="button">Ajouter une vid√©o</button>
                </div>
            
                <button type="sumbit" class="btn btn-primary">ajouter</button> 
            </div>
        {{form_end(trickform)}}
</div>
{% endblock %}
{% block script %}
	<script>
        $('#add-video').on('click', function (e) {
            const index = +$('#video-counter').val();
            const tmpl = $('.videos').data('prototype').replace(/__name__/g, index);
            console.log(tmpl);
            $('#video-counter').val(index + 1);
            $('#videos').append(tmpl);
        });
    </script>
{% endblock %}
